name: Nasdaq Market Watch

on:
  schedule:
    # 1. 아침 브리핑 (KST 08:50)
    - cron: '50 23 * * *'
    
    # 2. 프리마켓/유럽장 (KST 17:50)
    - cron: '50 8 * * 1-5'
    
    # 3. 미장 시작 전/지표발표 직후 (KST 22:50)
    - cron: '50 13 * * 1-5'
    
    # 4. 장 마감 직전 (KST 05:50)
    - cron: '50 20 * * 1-5'

  workflow_dispatch: # 수동 실행 버튼 유지

jobs:
  run-analysis:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'
          
      - name: Install Dependencies
        run: |
          pip install -r requirements.txt
          
      - name: Run Alert Bot
        env:
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
        run: python main.py
